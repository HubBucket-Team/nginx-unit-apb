FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogbmdpbngtdW5pdC1hcGIKaW1hZ2U6IG5naW54aW5jL25naW54LXVuaXQtYXBiCmRlc2Ny\
aXB0aW9uOiBOR0lOWCBVbml0IGlzIGFuIGR5bmFtaWMgbXVsdGktbGluZ3VhbCBhcHBsaWNhdGlv\
biBzZXJ2ZXIgZm9yIG1vZGVybiBkaXN0cmlidXRlZCBhcHBsaWNhdGlvbnMuCmJpbmRhYmxlOiBm\
YWxzZQphc3luYzogb3B0aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IE5HSU5YIFVuaXQK\
ICBpbWFnZVVybDogaHR0cHM6Ly9jZG4tMS53cC5uZ2lueC5jb20vd3AtY29udGVudC91cGxvYWRz\
LzIwMTcvMDgvdW5pdC1ncmV5c2NhbGUtaWNvbi5wbmcKICBsb25nRGVzY3JpcHRpb246IE5HSU5Y\
IFVuaXQgaXMgYW4gZHluYW1pYyBtdWx0aS1saW5ndWFsIGFwcGxpY2F0aW9uIHNlcnZlciBmb3Ig\
bW9kZXJuIGRpc3RyaWJ1dGVkIGFwcGxpY2F0aW9ucy4gSXQgbGF1bmNoZXMgYXBwbGljYXRpb24g\
Y29kZSBhbmQgcHJvdmlkZXMgYWNjZXNzIHRvIHlvdXIgYXBwbGljYXRpb24uCnBsYW5zOgogIC0g\
bmFtZTogZGVmYXVsdAogICAgZGVzY3JpcHRpb246IFRoaXMgZGVmYXVsdCBwbGFuIGRlcGxveXMg\
TkdJTlggVW5pdAogICAgZnJlZTogdHJ1ZQogICAgbWV0YWRhdGE6IHt9CiAgICBwYXJhbWV0ZXJz\
OgogICAgICAtIG5hbWU6IGNvbmZpZ3VyYXRpb24KICAgICAgICBkZWZhdWx0OiAneyJhcHBsaWNh\
dGlvbnMiOnsiZXhhbXBsZV9waHAiOnsidHlwZSI6InBocCIsIndvcmtlcnMiOjIsInJvb3QiOiIv\
c3J2L3NyYyIsImluZGV4IjoiaW5kZXgucGhwIn19LCJsaXN0ZW5lcnMiOnsiKjo4MzAwIjp7ImFw\
cGxpY2F0aW9uIjoiZXhhbXBsZV9waHAifX19JwogICAgICAgIHR5cGU6IHN0cmluZwogICAgICAg\
IHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IE5HSU5YIFVuaXQgSlNPTiBQYXlsb2FkCiAg\
ICAgIC0gbmFtZTogcmVwb3NpdG9yeQogICAgICAgIGRlZmF1bHQ6IGh0dHBzOi8vZ2lzdC5naXRo\
dWIuY29tLzdiYjE2MWQyNzFiNzFlMTM5Y2I1ZTYwNmI0ZjFhNGI0LmdpdAogICAgICAgIHR5cGU6\
IHN0cmluZwogICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgdGl0bGU6IEdpdCBSZXBvc2l0\
b3J5IFVSTAo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
